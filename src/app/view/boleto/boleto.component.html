<h1>Boletos</h1>
<hr>
<h3>Administrar Boletos</h3>
<hr>

<div class="container">
  <div class="container-inside">
    <form [formGroup]="fg" (ngSubmit)="onSubmit()">

      <label for="id">id</label><br />
      <input type="text" id="id" formControlName="id" readonly="true"><br />

      <div *ngIf="clientes">
        <label for="cliente">cliente</label><br />
        <select id="cliente" formControlName="cliente" [compareWith]="compareFn">
          <option *ngFor="let cliente of clientes" [(ngValue)]="cliente"> {{cliente.nome}} </option>
        </select>
      </div>
      <app-error-control [mostrarErro]="verificaValidTouched('cliente')" msgErro="cliente é obrigatório."></app-error-control>

      <label for="dataPrimeiraParcela">Data Primeira Parcela</label><br />
      <input type="text" id="dataPrimeiraParcela" placeholder="15/04/2020" formControlName="dataPrimeiraParcela"><br />
      <app-error-control [mostrarErro]="verificaValidTouched('dataPrimeiraParcela')" msgErro="Data da primeira parcela é obrigatório."></app-error-control>

      <label for="parcela">quantidade de parcelas</label><br />
      <input type="text" id="parcela" placeholder="parcela" formControlName="parcela"><br />
      <app-error-control [mostrarErro]="verificaValidTouched('parcela')" msgErro="Quantidade de parcelas é obrigatório."></app-error-control>

      <button type="submit">Submit</button>
      <button type="text" (click)="limparForm()"> Cancelar </button>
    </form>
  </div>
  <div class="container-inside">
    <app-form-debug [form]="fg"></app-form-debug>
  </div>
</div>

<hr>
<h3>Lista Boletoss</h3>
<hr>

<table *ngIf="boletos; else loading">
  <thead>
    <tr>
      <th *ngFor="let headItem of headElements"> {{headItem}} </th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let b of boletos">
      <td> {{b.id}} </td>
      <td> {{b.cliente.nome}} </td>
      <td> {{b.emissor.nome}} </td>
      <td> {{b.cliente.valor}} </td>
      <td> {{b.dataPrimeiraParcela}} </td>
      <td> {{b.parcela | currency:'BRL'}} </td>
      <td> <button (click)="delete(b.id)">deletar</button> | <button (click)="editar(b)"> editar</button></td>
    </tr>
  </tbody>
</table>
<ng-template #loading>
  <span> Carregando...</span>
</ng-template>

<hr>
