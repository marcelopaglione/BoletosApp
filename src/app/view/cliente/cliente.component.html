<mat-card>
  <mat-card-header class="titleflexheader">
    <mat-card-title>Administrar Cliente</mat-card-title>
  </mat-card-header>
  <hr>
  <mat-card-content *ngIf="clientes$ as clientes; else loading">
    <button class="titleflexbutton" mat-flat-button color="primary" type="button" (click)="openDetails(null)">Criar
      Novo Cliente</button>
    <div class="tableContent" [@fadeInOut]>
      <table matSort (matSortChange)="sortData($event)" mat-table [dataSource]="clientes" >

        <ng-container matColumnDef="id" >
          <th mat-sort-header="ID" mat-header-cell *matHeaderCellDef> ID </th>
          <td class="mousebtn" (click)="editar(element)" mat-cell *matCellDef="let element"> {{element.id}} </td>
        </ng-container>

        <ng-container matColumnDef="nome">
          <th mat-sort-header="Nome" mat-header-cell *matHeaderCellDef> Nome </th>
          <td class="mousebtn" (click)="editar(element)" mat-cell *matCellDef="let element"> {{element.nome}} </td>
        </ng-container>

        <ng-container matColumnDef="telefone">
          <th mat-sort-header="Telefone" mat-header-cell *matHeaderCellDef> Telefone </th>
          <td class="mousebtn" (click)="editar(element)" mat-cell *matCellDef="let element"> {{element.telefone | phone}} </td>
        </ng-container>

        <ng-container matColumnDef="valor">
          <th mat-sort-header="Valor" mat-header-cell *matHeaderCellDef> Valor do Aluguel </th>
          <td class="mousebtn" (click)="editar(element)" mat-cell *matCellDef="let element"> {{element.valor | currency:'BRL'}} </td>
        </ng-container>

        <ng-container matColumnDef="cep">
          <th mat-sort-header="Cep" mat-header-cell *matHeaderCellDef> Cep </th>
          <td class="mousebtn" (click)="editar(element)" mat-cell *matCellDef="let element"> {{element.endereco.cep}} </td>
        </ng-container>

        <ng-container matColumnDef="rua">
          <th mat-sort-header="Rua" mat-header-cell *matHeaderCellDef> Rua </th>
          <td class="mousebtn" (click)="editar(element)" mat-cell *matCellDef="let element"> {{element.endereco.rua}} </td>
        </ng-container>

        <ng-container matColumnDef="numero">
          <th mat-sort-header="Numero" mat-header-cell *matHeaderCellDef> Número </th>
          <td class="mousebtn" (click)="editar(element)" mat-cell *matCellDef="let element"> {{element.endereco.numero}} </td>
        </ng-container>

        <ng-container matColumnDef="cidade">
          <th mat-sort-header="Cidade" mat-header-cell *matHeaderCellDef> Cidade </th>
          <td class="mousebtn" (click)="editar(element)" mat-cell *matCellDef="let element"> {{element.endereco.cidade.nome}} -
            {{element.endereco.estado.sigla}}
          </td>
        </ng-container>

        <ng-container matColumnDef="acoes">
          <th mat-header-cell *matHeaderCellDef> Ações </th>
          <td mat-cell *matCellDef="let element">
            <div class="buttonGroup">
              <button class="bt1" mat-mini-fab color="primary">
                <i class="material-icons">
                  settings
                </i>
              </button>
              <button class="bt2" mat-mini-fab color="warn" (click)="delete(element, $event)" matTooltip="Deletar {{element.nome}}">
                <i class="material-icons">
                  delete
                </i></button>&nbsp;
              <button class="bt3" mat-mini-fab color="primary" (click)="editar(element)" matTooltip="Editar {{element.nome}}">
                <i class="material-icons">
                  edit
                </i>
              </button>
            </div>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="headElements"></tr>
        <tr mat-row *matRowDef="let row; columns: headElements;"></tr>
      </table>
      <br><br>
      <mat-card-footer>
      </mat-card-footer>
    </div>

  </mat-card-content>
</mat-card>

<ng-template #loading>
    <div class="loading">
      <span> <mat-spinner></mat-spinner></span>
    </div>
</ng-template>
